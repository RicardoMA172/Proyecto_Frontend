<header class="topbar" *ngIf="isAuthenticated">
  <!-- Toggle placed at the left edge of the header -->
  <button class="toggle" (click)="toggleSidebar()">‚ò∞</button>
  <!-- Brand (logo + title) placed right of the toggle. Do not change the toggle button. -->
  <div class="header-brand">
    <img src="assets/logo.png" alt="logo" class="topbar-logo" />
    <span class="topbar-title">{{ title() }}</span>
  </div>
  <div class="topbar-right">
    <div class="settings-wrapper">
      <button class="settings-btn" [class.active]="showSettings" (click)="toggleSettings()" aria-haspopup="true" aria-expanded="{{showSettings}}" aria-label="Configuraci√≥n">
        <!-- Alternate gear (cog) SVG - compact filled-outline style -->
        <svg class="settings-icon" viewBox="0 0 24 24" width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
          <path d="M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.65l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.03 7.03 0 0 0-1.6-.94l-.36-2.54A.5.5 0 0 0 13 1h-2a.5.5 0 0 0-.5.42l-.36 2.54c-.57.23-1.12.53-1.6.94l-2.39-.96a.5.5 0 0 0-.6.22L2.71 7.83a.5.5 0 0 0 .12.65L4.86 10.06c-.04.31-.06.63-.06.94s.02.63.06.94L2.71 13.58a.5.5 0 0 0-.12.65l1.92 3.32c.14.24.43.34.68.22l2.39-.96c.48.41 1.03.72 1.6.95l.36 2.54A.5.5 0 0 0 11 23h2a.5.5 0 0 0 .5-.42l.36-2.54c.57-.23 1.12-.54 1.6-.95l2.39.96c.25.12.54.02.68-.22l1.92-3.32a.5.5 0 0 0-.12-.65l-2.03-1.58zM12 15.5A3.5 3.5 0 1 1 12 8.5a3.5 3.5 0 0 1 0 7z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
      <div class="settings-panel" *ngIf="showSettings">
        <button class="settings-item" (click)="openProfileFromSettings()">Ver perfil</button>
        <button class="settings-item" (click)="logout()">Cerrar sesi√≥n</button>
      </div>
    </div>
  </div>
  <div class="profile-panel" *ngIf="showProfile" style="position: fixed !important; top: 64px !important; right: 24px !important; z-index: 2147483647 !important; background: #2b3036 !important; color: #eef2f5 !important; font-family: Roboto, system-ui, Arial, sans-serif !important;">
    <div class="profile-row"><strong>Nombre:</strong> {{ userProfile?.name }}</div>
    <div class="profile-row"><strong>Email:</strong> {{ userProfile?.email }}</div>
  </div>

</header>

<!-- Overlay para cuando la sidebar est√° abierta en pantallas peque√±as -->
<div class="overlay" (click)="toggleSidebar()" [class.show]="!sidebarClosed"></div>

<div class="layout">
  <nav *ngIf="showSidebar" class="sidebar" [class.closed]="sidebarClosed">
    <div class="sidebar-header">
      <div class="brand" *ngIf="!sidebarClosed"></div>
    </div>

    <ul class="menu">
  <li><a routerLink="/" data-short="üè†" (click)="onMenuClick()"><span>Inicio</span></a></li>
  <li><a routerLink="/temp" data-short="TEMP" (click)="onMenuClick()"><span>Temperatura</span></a></li>
  <li><a routerLink="/hum" data-short="HUM" (click)="onMenuClick()"><span>Humedad</span></a></li>
  <li><a routerLink="/amon" data-short="NH3" (click)="onMenuClick()"><span>Amon√≠aco (NH3)</span></a></li>
  <li><a routerLink="/co" data-short="CO" (click)="onMenuClick()"><span>Mon√≥xido de Carbono (CO)</span></a></li>
  <li><a routerLink="/pm10" data-short="pm10" (click)="onMenuClick()"><span>Part√≠culas PM10</span></a></li>
  <li><a routerLink="/pm25" data-short="pm2.5" (click)="onMenuClick()"><span>Part√≠culas PM2.5</span></a></li>
    </ul>
  </nav>

  <main class="content">
    <router-outlet></router-outlet>
  </main>
</div>
