<header class="topbar" *ngIf="isAuthenticated">
  <!-- Toggle placed at the left edge of the header -->
  <button class="toggle" (click)="toggleSidebar()">‚ò∞</button>
  <!-- Brand (logo + title) placed right of the toggle. Do not change the toggle button. -->
  <div class="header-brand">
    <img src="assets/logo.png" alt="logo" class="topbar-logo" />
    <span class="topbar-title">{{ title() }}</span>
  </div>
  <div class="topbar-right">
    <div class="settings-wrapper">
      <button class="settings-btn" [class.active]="showSettings" (click)="toggleSettings()" aria-haspopup="true" aria-expanded="{{showSettings}}">‚öô</button>
      <div class="settings-panel" *ngIf="showSettings">
        <button class="settings-item" (click)="openProfileFromSettings()">Ver perfil</button>
        <button class="settings-item" (click)="logout()">Cerrar sesi√≥n</button>
      </div>
    </div>
  </div>
  <div class="profile-panel" *ngIf="showProfile" style="position: fixed !important; top: 64px !important; right: 24px !important; z-index: 2147483647 !important; background: #2b3036 !important; color: #eef2f5 !important; font-family: Roboto, system-ui, Arial, sans-serif !important;">
    <div class="profile-row"><strong>Nombre:</strong> {{ userProfile?.name }}</div>
    <div class="profile-row"><strong>Email:</strong> {{ userProfile?.email }}</div>
  </div>

</header>

<!-- Overlay para cuando la sidebar est√° abierta en pantallas peque√±as -->
<div class="overlay" (click)="toggleSidebar()" [class.show]="!sidebarClosed"></div>

<div class="layout">
  <nav *ngIf="showSidebar" class="sidebar" [class.closed]="sidebarClosed">
    <div class="sidebar-header">
      <div class="brand" *ngIf="!sidebarClosed"></div>
    </div>

    <ul class="menu">
  <li><a routerLink="/" data-short="üè†" (click)="onMenuClick()"><span>Inicio</span></a></li>
  <li><a routerLink="/temp" data-short="TEMP" (click)="onMenuClick()"><span>Temperatura</span></a></li>
  <li><a routerLink="/hum" data-short="HUM" (click)="onMenuClick()"><span>Humedad</span></a></li>
  <li><a routerLink="/amon" data-short="NH3" (click)="onMenuClick()"><span>Amon√≠aco (NH3)</span></a></li>
  <li><a routerLink="/co" data-short="CO" (click)="onMenuClick()"><span>Mon√≥xido de Carbono (CO)</span></a></li>
  <li><a routerLink="/nox" data-short="NOx" (click)="onMenuClick()"><span>√ìxidos de Nitr√≥geno (NOx)</span></a></li>
  <li><a routerLink="/sox" data-short="SOx" (click)="onMenuClick()"><span>√ìxidos de Azufre (SOx)</span></a></li>
  <li><a routerLink="/pm10" data-short="pm10" (click)="onMenuClick()"><span>Part√≠culas PM10</span></a></li>
  <li><a routerLink="/pm25" data-short="pm2.5" (click)="onMenuClick()"><span>Part√≠culas PM2.5</span></a></li>
    </ul>
  </nav>

  <main class="content">
    <router-outlet></router-outlet>
  </main>
</div>
